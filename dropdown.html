<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GitHub-style Dropdown</title>
<style>
  :root{
    --bg: #0d1117;
    --panel: #161b22;
    --hover: #1f2630;
    --text: #c9d1d9;
    --muted: #8b949e;
    --border: #30363d;
    --shadow: 0 16px 48px rgba(0,0,0,.35), 0 8px 24px rgba(0,0,0,.3), 0 4px 12px rgba(0,0,0,.25);
    --radius: 12px;
  }

  body{
    margin:0; min-height:100svh; display:grid; place-items:center;
    background: var(--bg); color: var(--text); font: 14px/1.4 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  }

  .filter{
    position: relative; display:inline-block;
  }

  .filter-button{
    display:flex; align-items:center; gap:.5rem;
    background: var(--panel); color: var(--text);
    border: 1px solid var(--border); border-radius: 8px;
    padding: .5rem .75rem; cursor: pointer;
  }
  .filter-button .caret{ transition: transform .15s ease; }
  .filter-button[aria-expanded="true"] .caret{ transform: rotate(180deg); }
  .filter-button:focus-visible{ outline: 2px solid #2f81f7; outline-offset: 2px; }

  /* Menu panel */
  .menu{
    position:absolute; top: calc(100% + 8px); right: 0;
    background: var(--panel); color: var(--text);
    border: 1px solid var(--border); border-radius: var(--radius);
    box-shadow: var(--shadow);
    min-width: 260px;
    padding: 8px 0;
    display: none;
    z-index: 10;
  }
  .menu[data-open="true"]{ display:block; }

  .menu-title{
    font-weight:600; padding: 8px 12px 6px 12px; color: var(--text);
  }
  .divider{
    height:1px; background: var(--border); margin: 6px 0;
  }

  /* Items */
  .menuitem{
    display:flex; align-items:center; gap:.5rem;
    width:100%; background:none; border:0; text-align:left;
    color: var(--text); padding: 10px 12px 10px 12px; cursor:pointer;
    font: inherit;
  }
  .menuitem .check{
    width:18px; height:18px; display:grid; place-items:center; opacity:0;
  }
  .menuitem[aria-checked="true"] .check{ opacity:1; }
  .menuitem .label{ flex:1; }
  .menuitem .sub{ color: var(--muted); }

  .menuitem:hover, .menuitem[data-active="true"]{ background: var(--hover); }
  .menuitem:focus-visible{ outline: 2px solid #2f81f7; outline-offset: -2px; }

  /* Small close “x” in the corner (optional) */
  .menu .close{
    position:absolute; top:8px; right:8px; width:28px; height:28px;
    display:grid; place-items:center; border: 1px solid var(--border);
    border-radius: 6px; background: transparent; color: var(--muted);
    cursor:pointer;
  }
  .menu .close:hover{ background: var(--hover); color: var(--text); }
</style>
</head>
<body>

<div class="filter">
  <button class="filter-button" id="filterBtn" aria-haspopup="menu" aria-expanded="false" aria-controls="typeMenu">
    <span>Type</span>
    <svg class="caret" width="14" height="14" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" d="M4.427 6.427a.75.75 0 0 1 1.06 0L8 8.94l2.513-2.513a.75.75 0 1 1 1.06 1.06L8.53 10.53a.75.75 0 0 1-1.06 0L4.427 7.487a.75.75 0 0 1 0-1.06Z"/></svg>
  </button>

  <div class="menu" id="typeMenu" role="menu" aria-labelledby="filterBtn" tabindex="-1">
    <button class="close" type="button" title="Close" aria-label="Close menu">&times;</button>
    <div class="menu-title">Select type</div>

    <button class="menuitem" role="menuitemradio" aria-checked="true" data-value="all">
      <span class="check" aria-hidden="true">
        <svg width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.173 11.6 2.8 8.227l1.13-1.13 2.243 2.244 5.897-5.897 1.13 1.13z"/></svg>
      </span>
      <span class="label">All</span>
    </button>

    <div class="divider" role="separator" aria-hidden="true"></div>

    <button class="menuitem" role="menuitemradio" aria-checked="false" data-value="sources">
      <span class="check" aria-hidden="true">
        <svg width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.173 11.6 2.8 8.227l1.13-1.13 2.243 2.244 5.897-5.897 1.13 1.13z"/></svg>
      </span>
      <span class="label">Sources</span>
    </button>

    <button class="menuitem" role="menuitemradio" aria-checked="false" data-value="forks">
      <span class="check" aria-hidden="true">
        <svg width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.173 11.6 2.8 8.227l1.13-1.13 2.243 2.244 5.897-5.897 1.13 1.13z"/></svg>
      </span>
      <span class="label">Forks</span>
    </button>

    <button class="menuitem" role="menuitemradio" aria-checked="false" data-value="archived">
      <span class="check" aria-hidden="true">
        <svg width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.173 11.6 2.8 8.227l1.13-1.13 2.243 2.244 5.897-5.897 1.13 1.13z"/></svg>
      </span>
      <span class="label">Archived</span>
    </button>

    <button class="menuitem" role="menuitemradio" aria-checked="false" data-value="sponsored">
      <span class="check" aria-hidden="true">
        <svg width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.173 11.6 2.8 8.227l1.13-1.13 2.243 2.244 5.897-5.897 1.13 1.13z"/></svg>
      </span>
      <span class="label">Can be sponsored</span>
    </button>

    <button class="menuitem" role="menuitemradio" aria-checked="false" data-value="mirrors">
      <span class="check" aria-hidden="true">
        <svg width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.173 11.6 2.8 8.227l1.13-1.13 2.243 2.244 5.897-5.897 1.13 1.13z"/></svg>
      </span>
      <span class="label">Mirrors</span>
    </button>

    <button class="menuitem" role="menuitemradio" aria-checked="false" data-value="templates">
      <span class="check" aria-hidden="true">
        <svg width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M6.173 11.6 2.8 8.227l1.13-1.13 2.243 2.244 5.897-5.897 1.13 1.13z"/></svg>
      </span>
      <span class="label">Templates</span>
    </button>
  </div>
</div>

<script>
  const btn = document.getElementById('filterBtn');
  const menu = document.getElementById('typeMenu');
  const closeBtn = menu.querySelector('.close');
  const items = Array.from(menu.querySelectorAll('.menuitem'));

  function openMenu() {
    menu.dataset.open = "true";
    btn.setAttribute('aria-expanded', 'true');
    // focus first checked item
    (items.find(i => i.getAttribute('aria-checked') === 'true') || items[0]).focus();
    document.addEventListener('pointerdown', outsideClick);
    document.addEventListener('keydown', onKey);
  }
  function closeMenu(focusButton = true) {
    delete menu.dataset.open;
    btn.setAttribute('aria-expanded', 'false');
    document.removeEventListener('pointerdown', outsideClick);
    document.removeEventListener('keydown', onKey);
    if (focusButton) btn.focus();
  }
  function outsideClick(e){
    if (!menu.contains(e.target) && e.target !== btn) closeMenu(false);
  }

  btn.addEventListener('click', () => {
    const isOpen = menu.dataset.open === "true";
    isOpen ? closeMenu() : openMenu();
  });
  closeBtn.addEventListener('click', () => closeMenu());

  // Select logic
  function selectItem(el){
    items.forEach(i => i.setAttribute('aria-checked','false'));
    el.setAttribute('aria-checked','true');
    // update button label if you want to reflect selection:
    // btn.firstElementChild.textContent = el.textContent.trim();
    closeMenu();
    // Emit a custom event you can listen for:
    const event = new CustomEvent('typechange', { detail: el.dataset.value });
    btn.dispatchEvent(event);
  }
  items.forEach(i => {
    i.addEventListener('click', () => selectItem(i));
    i.addEventListener('mouseenter', () => items.forEach(x => x.dataset.active = (x===i) ? "true" : "false"));
    i.addEventListener('mouseleave', () => i.dataset.active = "false");
  });

  // Keyboard support
  function onKey(e){
    const currentIndex = items.indexOf(document.activeElement);
    switch(e.key){
      case 'Escape': e.preventDefault(); closeMenu(); break;
      case 'ArrowDown':
        e.preventDefault();
        (items[currentIndex + 1] || items[0]).focus();
        break;
      case 'ArrowUp':
        e.preventDefault();
        (items[currentIndex - 1] || items.at(-1)).focus();
        break;
      case 'Home': e.preventDefault(); items[0].focus(); break;
      case 'End': e.preventDefault(); items.at(-1).focus(); break;
      case 'Enter':
      case ' ':
        if (items.includes(document.activeElement)){
          e.preventDefault();
          selectItem(document.activeElement);
        }
        break;
    }
  }

  // Optional: example listener
  btn.addEventListener('typechange', (e) => {
    console.log('Selected type:', e.detail);
  });

  // Close on focusout to the world (optional, gentle)
  menu.addEventListener('focusout', (e)=>{
    if (!menu.contains(e.relatedTarget) && e.relatedTarget !== btn) closeMenu(false);
  });
</script>
</body>
</html>
